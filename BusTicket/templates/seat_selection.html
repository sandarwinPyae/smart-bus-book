

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap JavaScript Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <!-- Flowbite CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />

    <!-- Flowbite JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <style>
        /* Custom styles for seat buttons */.seat-btn {
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      border: 1px solid #ccc;
      user-select: none;
      transition: background-color 0.2s, color 0.2s;
      min-width: 40px;
      text-align: center;
      font-weight: 600;
    }
    .seat-btn.available {
      background-color: #f0f9ff;
      color: #0369a1;
    }
    .seat-btn.available:hover {
      background-color: #bae6fd;
    }
    .seat-btn.booked {
      background-color: #ddd;
      color: #999;
      cursor: not-allowed;
      pointer-events: none;
    }
    .seat-btn.selected {
      background-color: #0369a1;
      color: white;
      font-weight: bold;
    }
    #seatGrid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      max-width: 300px;
      margin-bottom: 16px;
    }
    #resetSeatsBtn {
      margin-right: 8px;
      padding: 8px 16px;
      background-color: #ccc;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }
    #resetSeatsBtn:hover {
      background-color: #aaa;
    }
    #submitSeatsBtn {
      padding: 8px 16px;
      background-color: #0369a1;
      border: none;
      border-radius: 6px;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
    #submitSeatsBtn:hover {
      background-color: #024f72;
    }

        /* Custom styles for the trip summary line */
        .trip-summary-line::before {
            content: '';
            position: absolute;
            left: 8px; /* Adjust to align with circles */
            top: 20px; /* Start below the first circle */
            height: calc(100% - 40px); /* Adjust height to end above last circle */
            width: 2px;
            background-color: #d1d5db; /* gray-300 */
            z-index: 0;
        }
        .trip-summary-dot {
            @apply w-4 h-4 rounded-full bg-blue-500 absolute z-10;
        }
        .trip-summary-dot.top { top: 12px; left: 2px; }
        .trip-summary-dot.bottom { bottom: 12px; left: 2px; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
<!--    {% extends 'base_tailwind.html' %}-->
    {% block content %}

<!--    progress bar-->
    <div class="w-full bg-white p-8 rounded-lg shadow-lg mx-auto">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Booking Progress</h2>

        <div class="relative mb-8">
            <!-- Progress Line -->
            <div class="absolute inset-0 flex items-center">
                <div class="w-full h-1 bg-gray-300 rounded-full"></div>
            </div>

            <!-- Steps Container -->
            <div class="relative flex justify-between z-10">
                <!-- Step 1: Seat Selection (Active) -->
                <div class="flex flex-col items-center">
                    <div class="w-8 h-8 flex items-center justify-center rounded-full bg-blue-500 text-white font-bold shadow-md">1</div>
                    <div class="text-sm mt-2 text-blue-600 font-semibold text-center">Seat Selection</div>
                </div>

                <!-- Step 2: Traveller Info -->
                <div class="flex flex-col items-center">
                    <div class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-300 text-gray-700 font-bold">2</div>
                    <div class="text-sm mt-2 text-gray-500 text-center">Traveller Info</div>
                </div>

                <!-- Step 3: Payment -->
                <div class="flex flex-col items-center">
                    <div class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-300 text-gray-700 font-bold">3</div>
                    <div class="text-sm mt-2 text-gray-500 text-center">Payment</div>
                </div>

                <!-- Step 4: Confirm -->
                <div class="flex flex-col items-center">
                    <div class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-300 text-gray-700 font-bold">4</div>
                    <div class="text-sm mt-2 text-gray-500 text-center">Confirm</div>
                </div>
            </div>
        </div>

    </div>

<!--    seat selection & amount calculation-->
    <div class="container mx-auto flex flex-col lg:flex-row gap-8 py-8">
        <!-- Left Section: Seat Selection -->
        <div class="lg:w-2/3 bg-white p-6 rounded-lg shadow-lg">
            <h2>Please select up to <span id="maxSeatsAllowed">3</span> seat(s):</h2>

  <form method="post" action="{% url 'submit_seats' schedule_id %}">
    {% csrf_token %}
    <input type="hidden" id="selectedSeatsInput" name="selected_seats" value="" />

    <div id="seatGrid">
      <button type="button" class="seat-btn available" data-seat="A1">A1</button>
      <button type="button" class="seat-btn available" data-seat="A2">A2</button>
      <div></div> <!-- Aisle -->
      <div></div> <!-- Aisle -->
      <button type="button" class="seat-btn booked" data-seat="A3">A3</button>

      <button type="button" class="seat-btn available" data-seat="B1">B1</button>
      <button type="button" class="seat-btn available" data-seat="B2">B2</button>
      <div></div>
      <div></div>
      <button type="button" class="seat-btn available" data-seat="B3">B3</button>

      <button type="button" class="seat-btn available" data-seat="C1">C1</button>
      <button type="button" class="seat-btn booked" data-seat="C2">C2</button>
      <div></div>
      <div></div>
      <button type="button" class="seat-btn available" data-seat="C3">C3</button>
    </div>

    <button type="button" id="resetSeatsBtn">Reset Seats</button>
    <button type="submit" id="submitSeatsBtn">Submit Seats</button>
  </form>
<!--            <h3 class="text-xl font-bold text-gray-800 mb-6">Please select <span id="maxSeatsAllowed">{{seats}}</span> Seat(s).</h3>-->

<!--            &lt;!&ndash; Driver Section &ndash;&gt;-->
<!--            <div class="mb-6">-->
<!--                <div class="text-gray-700 font-semibold mb-2">Driver</div>-->
<!--                <div class="flex gap-4">-->
<!--                    <div class="seat-btn locked">-->
<!--                        <i class="fas fa-lock text-gray-500"></i>-->
<!--                    </div>-->
<!--                    <div class="seat-btn locked">-->
<!--                        <i class="fas fa-lock text-gray-500"></i>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Seat Grid &ndash;&gt;-->
<!--            <form method="post" action="{% url 'submit_seats' schedule_id %}">-->
<!--                {% csrf_token %}-->
<!--                <div id="seatGrid" class="grid grid-cols-5 gap-4">-->
<!--                    <input type="hidden" id="selectedSeatsInput" name="selected_seats" value="">-->

<!--                &lt;!&ndash; Example Seat Layout (adjust as needed) &ndash;&gt;-->
<!--                &lt;!&ndash; Row A &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'A1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="A1">A1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'A2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="A2">A2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'A3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="A3">A3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row B &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'B1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="B1">B1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'B2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="B2">B2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'B3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="B3">B3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row C &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'C1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="C1">C1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'C2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="C2">C2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'C3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="C3">C3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row D &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'D1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="D1">D1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'D2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="D2">D2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'D3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="D3">D3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row E &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'E1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="E1">E1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'E2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="E2">E2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'E3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="E3">E3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row F &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'F1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="F1">F1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'F2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="F2">F2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--&lt;!&ndash;                    <button class="seat-btn available" data-seat="F3">F3</button>&ndash;&gt;-->
<!--                </div>-->

<!--                &lt;!&ndash; Row G &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'G1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="G1">G1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'G2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="G2">G2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--&lt;!&ndash;                    <button class="seat-btn available" data-seat="G3">G3</button>&ndash;&gt;-->
<!--                </div>-->

<!--                &lt;!&ndash; Row H &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'H1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="H1">H1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'H2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="H2">H2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'H3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="H3">H3</button>-->
<!--                </div>-->

<!--                &lt;!&ndash; Row I &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'I1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="I1">I1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'I2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="I2">I2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'I3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="I3">I3</button>-->
<!--                </div>-->
<!--                &lt;!&ndash; Row J &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'J1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="J1">J1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'J2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="J2">J2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'J3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="J3">J3</button>-->
<!--                </div>-->
<!--                &lt;!&ndash; Row K &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'K1' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="K1">K1</button>-->
<!--                </div>-->
<!--                <div class="col-span-1 flex justify-end">-->
<!--                    <button type="button" class="seat-btn {% if 'K2' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="K2">K2</button>-->
<!--                </div>-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1"></div> &lt;!&ndash; Aisle &ndash;&gt;-->
<!--                <div class="col-span-1 flex justify-start">-->
<!--                    <button type="button" class="seat-btn {% if 'K3' in booked_seat_list %}booked{% else %}available{% endif %}" data-seat="K3">K3</button>-->
<!--                </div>-->


<!--                </div>-->
<!--                <button type="button" id="resetSeatsBtn" class="mt-4 px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold">-->
<!--                    Reset Seats-->
<!--                </button>-->
<!--                <button type="submit" class="mt-4 px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white font-semibold">-->
<!--                    Submit Seats-->
<!--                </button>-->







<!--                <p id="selectionMessage" class="text-red-500 mt-4 hidden">You can only select a maximum of <span id="maxSeatsMsg">{{seats}}</span> seats.</p>-->
<!--            </form>-->
        </div>

        <!-- Right Section: Trip Summary -->
        <div class="lg:w-1/3 bg-white p-6 rounded-lg shadow-lg">
            <h3 class="text-xl font-bold text-gray-800 mb-6">Trip Summary</h3>

            <div class="relative pl-6 mb-4 trip-summary-line">
                <div class="trip-summary-dot top"></div>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-gray-700 font-medium">{{origin}}</span>
                    <span class="text-gray-500 text-sm">{{date}}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-700 font-medium">{{destination}}</span>
                    <span class="text-gray-500 text-sm">{{date}}</span>
                </div>
                <div class="trip-summary-dot bottom"></div>
            </div>
            <p class="text-gray-500 text-xs mb-4">* Arrival times provided are estimates and may be subject to change.</p>

            <div class="mb-4">
                <button class="text-blue-600 font-semibold flex items-center hover:underline">
                    <i class="fas fa-chevron-right text-sm mr-2"></i> Full Itinerary
                </button>
            </div>

            <div class="text-gray-700 mb-4">
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span>Bus Operator</span>
                    <span class="font-medium">{{selected_bus.bus.operator.operator_name}} Express</span>
                </div>
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span>Bus Type</span>
                    <span class="font-medium">{{selected_bus.bus.bus_type}}</span>
                </div>
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span>Unit Ticket Price</span>
                    <span class="font-medium">MMK <span id="unitTicketPrice">{{selected_bus.price}}</span></span>
                </div>
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span>Number of Seats</span>
                    <span class="font-medium" id="numberOfSeats">{{seats}}</span>
                </div>
            </div>

            <div class="flex justify-between items-center py-2 text-lg font-bold text-gray-800 border-t-2 border-gray-300 pt-4">
                <span>Total Ticket Price</span>
                <span>MMK <span id="totalTicketPrice">{{total_price}}</span></span>
            </div>

            <div class="mt-6 p-4 bg-blue-50 rounded-lg text-blue-800 text-sm">
                <h4 class="font-semibold mb-2">Notices by {{selected_bus.bus.operator.operator_name}} Express</h4>
                <ul class="list-disc list-inside space-y-1">
                    <li>NRC+Letter of Endorsement from ward+Letter of Endorsement from Police</li>
                </ul>
            </div>
        </div>
    </div>





    {% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const maxSeats = parseInt(document.getElementById('maxSeatsAllowed').textContent, 10);
      const selectedSeats = [];
      const seatButtons = document.querySelectorAll('.seat-btn.available');
      const selectedSeatsInput = document.getElementById('selectedSeatsInput');

      seatButtons.forEach(button => {
        button.addEventListener('click', () => {
          const seat = button.dataset.seat;

          if (selectedSeats.includes(seat)) {
            // Unselect seat
            selectedSeats.splice(selectedSeats.indexOf(seat), 1);
            button.classList.remove('selected');
          } else {
            if (selectedSeats.length < maxSeats) {
              selectedSeats.push(seat);
              button.classList.add('selected');
            } else {
              alert(`You can only select ${maxSeats} seat(s).`);
            }
          }
          selectedSeatsInput.value = selectedSeats.join(',');
        });
      });

      document.getElementById('resetSeatsBtn').addEventListener('click', () => {
        selectedSeats.length = 0;
        selectedSeatsInput.value = '';
        seatButtons.forEach(button => button.classList.remove('selected'));
      });
    });
  </script>
</body>
</html>




